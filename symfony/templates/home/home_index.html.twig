{% extends 'page.html.twig' %}

{% block main %}
    <div class="home-content-wrapper">
        <div class="switcher-home-wrapper d-none d-xl-flex justify-content-center mx-auto">
            <img src="/images/icons/icon-roll.svg" class="switcher-home-wrapper__icon switcher-roll on"
                 alt="Choisir la roue">
            <img src="/images/icons/icon-grid.svg" class="switcher-home-wrapper__icon switcher-grid"
                 alt="Choisir la grille">
        </div>

        <div class="countdown-wrapper row">
            <div class="countdown col-12 col-sm-6 d-flex flex-column align-items-center">
                <h3 class="countdown-title">1<sup>er</sup> tour</h3>
                <div class="countdown-counters d-flex">
                    <div class="counter"><span class="counter-first-round" b="--"></span><b>Jours</b></div>
                    <div class="counter"><span class="counter-first-round" b="--"></span><b>Heures</b></div>
                    <div class="counter"><span class="counter-first-round" b="--"></span><b>Min</b></div>
                    <div class="counter"><span class="counter-first-round" b="--"></span><b>Sec</b></div>
                </div>
            </div>
            <div class="countdown col-12 col-sm-6 d-flex flex-column align-items-center">
                <h3 class="countdown-title">2<sup>ème</sup> tour</h3>
                <div class="countdown-counters d-flex">
                    <div class="counter"><span class="counter-second-round" b="--"></span><b>Jours</b></div>
                    <div class="counter"><span class="counter-second-round" b="--"></span><b>Heures</b></div>
                    <div class="counter"><span class="counter-second-round" b="--"></span><b>Min</b></div>
                    <div class="counter"><span class="counter-second-round" b="--"></span><b>Sec</b></div>
                </div>
            </div>
        </div>

        <div class="choice-tab-wrapper d-flex flex-column">
            {% include 'candidate/candidate_grid_list.html.twig' with {'markup': 'a', 'greyFilter': false} %}
            <section id="candidates-roll-wrapper" class="candidates-roll-wrapper flex-wrap switcher-appearance">
                <div class="container g-0">
                    <div class="rolling-base">
                        {% for candidate in candidates %}
                            <div class="col-12">
                                <div class="candidate-roll-wrapper d-flex flex-column justify-content-end"
                                    style="background-image: url({{ candidate.displayPicture }});">
                                    <a class="candidate-roll-wrapper__link-zone"
                                       href="{{ path('candidates_show', {'candidate': candidate.lastName}) }}"></a>

                                    <h2 class="candidate-roll-wrapper__party-name">
                                        {% if primaryChoice != 0 %}

                                            Primaire {{ candidate.politicalParty.acronym }}
                                        {% else %}
                                            {{ candidate.politicalParty.name }}</h2>
                                        {% endif %}
                                    <h3 class="candidate-roll-wrapper__candidate-name">Candidat
                                        : {{ candidate.firstName }} {{ candidate.lastName }}</h3>
	                                {% if candidate.program is not null %}
	                                    <div class="candidate-roll-wrapper__biography d-none d-xl-block">
	                                        {{ candidate.program.presentation|raw }}
	                                    </div>
	                                {% endif %}
                                    <a class="candidate-roll-wrapper__link"
                                       href="{{ path('candidates_show', {'candidate': candidate.lastName}) }}">Découvrir
                                        le programme</a>
                                    <span class="candidate-roll-wrapper__source">{{ candidate.pictureSource }}</span>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
                <div class="d-flex flex-nowrap mx-auto mx-xl-0 ms-xl-auto circle-roll">
                    <div class="quarter-circle-bottom-left"></div>
                    <div class="quarter-circle-bottom-right"></div>
                    <button id="roll-left" class="btn btn-primary">
                        <img class="rotate" src="/images/icons/roll/arrow_left.svg" alt="Aller au candidat à gauche">
                    </button>
                    <button id="letsroll" class="btn btn-primary">
                        <img class="rotate" src="/images/icons/roll/random.svg" alt="Choisir un candidat aléatoirement">
                    </button>
                    <button id="roll-right" class="btn btn-primary">
                        <img class="rotate" src="/images/icons/roll/arrow_right.svg" alt="Aller au candidat à droite">
                    </button>
                </div>
            </section>
        </div>
    </div>

{% endblock %}


{# Add JS for switcher grid to roll #}
{% block javascripts %}
    {{ parent() }}
    {{ encore_entry_script_tags('switch-grid-roll') }}
    {{ encore_entry_script_tags('roll') }}
    {{ encore_entry_script_tags('swipe') }}
    {{ encore_entry_script_tags('counter') }}
{% endblock %}

